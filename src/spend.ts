import { CML } from "@lucid-evolution/lucid";

const tx = CML.Transaction.from_cbor_hex("84aa00818258208dff358dd2b0acaf8c6608f68e326ee54990134dc3de93c54344b6de3ba3206e000182a30058393022d6828a0fecb74e9217de60e08bac20b54ba0b4e82eaf579d10694a22d6828a0fecb74e9217de60e08bac20b54ba0b4e82eaf579d10694a01821a001a4e60a1581ccadc50649cd1daf6e0dea610dd9392a8be1c8e6ac570dc3773101f97a14d446566692d46726f6e7469657201028201d8185876d8799f4d446566692d46726f6e74696572583c243262243130246c7937437063726c42786e777977416b5a34494e444f424f4f73534f6666613636326979756d554c5a4a4a714f4743524352523565582431323432656333642d323834382d343936382d626237382d373932376134316339393838ff82583900fdceac055926aab3567bfda8647d3fdd78b163b9e6944c07919b1ee71d6b74328059d8ead0bc2942370215795054b12153f5b13bcef2fde11a05d570d0021a000621d0031a04e0586109a1581ccadc50649cd1daf6e0dea610dd9392a8be1c8e6ac570dc3773101f97a14d446566692d46726f6e74696572010b58208d0ba178f352fc605c040a91caac62903af62a6df5af9483a091e35163cfddcb0d8182582048444657cfe2aa426f62698de991b4b8340c56752d09727bffb6e7b424bdc8e3000e81581cfdceac055926aab3567bfda8647d3fdd78b163b9e6944c07919b1ee71082581d606ce33294813b1feba6a9728d5bf287464d85593730e5ad00367c718f1a004c4b40111a004c4b40a300828258202cba9d0fa8c43ee9ecb4d4535b38b0e2064acee683cffa005a42c8271021da8b5840d604cc1c6d8ee89c0b721e300dfcbab4d7116914880838db497e534d33a3bb08a05dc25a369f8d32562e56bc7329ce348fa1418f0bb7be6662b43143cb10f30c825820c4aff2d2af6c06a425135034a90c96465a3b8b4de2da747cee8451f74954cb3158404ab38668761c5e46d165547122a0e71e1afcf6ee5d558a316d76445e8a3fbc3423f3ca8f1b01de4d59d79d40aa83f772d5663756bfd61fd9a4c7e456a073650e0581840100d87a80821a000fd7191a128a678c0781590b7c590b790101003323232323232323232323232323232225333009323232323253323300f300130113754004264a666666030008264646464a666028600c0022a666030602e6ea80205400803854ccc050c00c00454ccc060c05cdd50040a8010070a99980a18020008a99980c180b9baa0081500200e00e3015375400e2646464646464646464646464a6603e66e59241076f776e65723a2000373266002600e60426ea805d220100153301f3372c92011365787472615f7369676e61746f726965733a20003732660026e9c0212201001323232533302500101c13253330263029002132325330253372c92112746f6b656e2061737365745f6e616d653a200037326600e6ea400922010015330253372c92010e746f6b656e20616d6f756e743a200037326600e6ea00052201001323232325333028301a00415333028301700515333028301a302a3754646600200202644a66605c0022980103d87a800013232533302c3371e0046eb8c054c0bcdd501289807198189ba90024bd7009980200200098190011bae30300011533029491126f776e6572207369676e6564207478212121001325333029301b302b3754002264a6605666e59241086f75747075743a200037326601a6008605a6ea8c010c0b4dd5000a4500132533302b301d302d3754002294054ccc0accdc780e1bae3031302e3754002264a6660586038605c6ea80044c94cccccc0d400454ccc0b4c07cc0bcdd50008992999819000816099299999981b80081681681681689919299981a800817899299999981d00081801801801809919299981c000819099299999981e80081981981981989919299981d80081a899299999982000081b01b01b01b09919299981f00081c099299999982180081c81c8992999820182180189919800800801111929998218010a51132533333304800103e03e03e03e13230033048004375c002608a00460040040746eb00040e40e4c100004c10000cdd7000981e800981e8019bae001303a001303a003375c002606e002606e0066eb8004c0d0004c0c0dd5000815815815815815981918179baa0010293006302e37540042a660589211f65787065637420706f6c6963795f6964203d3d207363726970745f6861736800163004302d37546008605a6ea8004c0bcc0b0dd500081299980080a80c8030a99814a4815a65787065637420536f6d65285f29203d0a2020202020202020202020206c6973742e66696e642865787472615f7369676e61746f726965732c20666e28766b6829207b20766b68203d3d20706172616d732e6f776e6572207d29001614a02a666050602e0082a666050602e00a264a666052603660566ea80044c94cc0accdcb2481086f75747075743a200037326601a6008605a6ea8c010c0b4dd5000a4500132533302b301d302d3754002294054ccc0acccc0accdc780e1bae3031302e3754002941288992999816180e18171baa00113253333330350011533302d301f302f3754002264a66606400205a264a66666606e00205c05c05c05c26464a66606a002060264a66666607400206206206206226464a666070002066264a66666607a002068068068068264a666074607a006266e3c05001c0d4dd7000981d000981d0019bae00130370013037003375c002606800260606ea80040b00b00b00b00b0c0c8c0bcdd5000814980318171baa002153302c49011f65787065637420706f6c6963795f696420213d207363726970745f6861736800163004302d37546008605a6ea8004c0bcc0b0dd500081299980080a80c8030a50153302949010b61696b656e3a3a746f646f0016222323300100100422533303000114c103d87a800013232533302e301d32533302f301e303137540022900009bad30353032375400264a66605e603c60626ea80045300103d87a8000132330010013756606c60666ea8008894ccc0d4004530103d87a80001323232325333035337220180042a66606a66e3c0300084c05ccc0e8dd4000a5eb80530103d87a8000133006006003375a606e0066eb8c0d4008c0e4008c0dc004cc03cdd5981a181a98189baa00200613010330330024bd70099802002000981a001181900091816800918161816981680098131baa018375a604c0046eb8c090004074c09c004c94ccc084c040c08cdd50008a5eb7bdb1804dd5981398121baa0013300100b01122323300100100322533302700114c0103d87a800013232323253330273372200e0042a66604e66e3c01c0084c024cc0b0dd3000a5eb80530103d87a8000133006006003375660520066eb8c09c008c0ac008c0a4004dd2a40006002002444a6664666605000626464646464646601800400266e2922010128000025333024337100069007099b80483c80400c54ccc090cdc4001a410004266e00cdc0241002800690068b2999813800899b8a4881035b5d2900005133714911035b5f2000333300800133714911025d2900005223330090090023006001223330090090020013758604a0046eb4c08c004c8cdd81ba83023001374e60480026ea800c4c94ccc0940044cdc52441027b7d00003133714911037b5f2000323233001001003225333028001100315333028302b0011323330090093027001337149101023a20003330090093028001004302a0011323330090093027001337149101023a20003330090093028001300633003003302c002302a0013371491102207d000033756006264a66604a002266e29221025b5d00003133714911035b5f2000333300600133714911015d000032233300700700230040012233300700700200137580066e292201022c2000133005375a0040022646466e2922010268270000132333001001337006e3400920013371491101270000322253330233371000490000800899191919980300319b8000548004cdc599b80002533302633710004900a0a40c02903719b8b33700002a66604c66e2000520141481805206e0043370c004901019b8300148080cdc70020011bae0022222323300100100522533302500110051533302530280011330033027001005133004302700133002002302800122323300100100322533301e30100011337149110130000031533301e337100029000099b8a489012d003300200233702900000089980299b8400148050cdc599b803370a002900a240c00066002002444a66603666e2400920001001133300300333708004900a19b8b3370066e140092014481800048c078c07c004dd6180e180e980e980e980e8011bab301b001301b301b0023758603200260326032602a6ea8020dc3a40046e1d200400a00a00a00a375c602a60246ea8008dc3a40002c6026602800460240026024004602000260186ea8004526153300a4911856616c696461746f722072657475726e65642066616c73650013656153300749011672656465656d65723a204d696e7452656465656d6572001615330064916d657870656374205b506169722861737365745f6e616d652c20616d6f756e74295d203d0a2020202020206d696e740a20202020202020207c3e206173736574732e746f6b656e7328706f6c6963795f6964290a20202020202020207c3e20646963742e746f5f70616972732829001615330054916565787065637420536f6d65286f757470757429203d0a2020202020202020202020206f7574707574730a20202020202020202020202020207c3e2066696e645f6163636f756e745f6f757470757428706f6c6963795f69642c2061737365745f6e616d6529001615330044912765787065637420496e6c696e65446174756d286461746129203d206f75747075742e646174756d0016153300349122657870656374205f3a205a6b566572696669636174696f6e4b6579203d2064617461001615330024912a657870656374204163636f756e74446174756d207b20757365725f69642c202e2e207d203d206461746100165734ae7155ceaab9e5573eae815d0aba2574898131d8799f02581c3dce7844f36b23b8c3f90afba40aa188e7f1d3f6e8acd1d544ed1da94d31323334353637383930303030ff0001f5f6")
console.log("TX", tx.to_json());

const exUnitsPrices = CML.ExUnitPrices.new(
    CML.Rational.new(
        BigInt(0.0577 * 100_000_000),
        100_000_000n,
    ),
    CML.Rational.new(
        BigInt(0.0000721 * 100_000_000),
        100_000_000n,
    ),
)

const feeAlgo = CML.LinearFee.new(
    BigInt(44),
    BigInt(155381),
    BigInt(15),
)

console.log('Required Fee:', CML.min_fee(
    tx,
    feeAlgo,
    exUnitsPrices,
    0n
), CML.min_no_script_fee(tx, feeAlgo), CML.min_script_fee(tx, exUnitsPrices))
console.log("-".repeat(100))
// mint circuit tx
console.log("TX", CML.Transaction.from_cbor_hex("84aa008182582026bb99b185be501f056bfd2038257af135c0627b80e90a9d705ec496866694c3010182a300583930fe01b858c6132bb5411ba3fb609224c8722ae8d43ed286d8085ae78afe01b858c6132bb5411ba3fb609224c8722ae8d43ed286d8085ae78a01821a003e044aa1581cfe01b858c6132bb5411ba3fb609224c8722ae8d43ed286d8085ae78aa14b436972637569742330303301028201d818590296d8799f58308f944ea2be1d423e0c36e660f1ada1a7134635fa3465a5fcaef0acf1f0896999a75cadedf66d311cd0a6313c18ffafce5f584081dfe06986c3f80e8297c1ebb297671e768da02d5bf34ad87b404aba89cc1655f024e28942c7a1169139e6ce5ecacfde081e9ba17708034ca12593f19c020c25582044e49aaff91a718f0199d1c35ae00b0f5f8101028d4ab9e804bf35a7f3eea524ff5f584093e02b6052719f607dacd3a088274f65596bd0d09920b61ab5da61bbdc7f5049334cf11213945d57e5ac7d055d042b7e024aa2b2f08f0a91260805272dc510515820c6e47ad4fa403b02b4510b647ae3d1770bac0326a805bbefd48056c8c121bdb8ff5f5840910d1b3de24b56acded36e43285b5abf910def69fa6f945b0a423dde08579d67f902cb2953a4e7b5f6bc2b9d173ec48c16fdffab8bad9fb1700e35bc74ea24c65820d72f1d717cae480612e71990734ace847aed7f6ff9de9d6efc85698b3095669cff9f58308d043ff56d286437f7783c5c9f7d9db2fc4678172f99454965f5085e17a9bd1f1613d14fffd8bcc826420946c35c925b583086fa74a9049758feb0336041daf0feb5f1d892ed563baac600ccf37e2ae7319b68070293a39b992e547bd264ca55bb48583090c9f2c17f3ca057bb78858da0a800bf5dd7ce60c38efa8db74a1abbc3eac9325448dff74e05ead6f04897982076a79858308ecfbfd2e8f23c4116d078da1806abcab8c4abe3af53c850e7b77a4a5fe27cae9db82e3de02bcd665c26946b0a38d0355830a6df181d334c56b40aa234d5d460ddac333c18bb10574346ed11416e42b7af1d29ac77deaa02e0baf203624e384a27bd583083e9fd82457045e4ec2ee99837707c234ecbf106344148819b4c19ef1559a639b1a78faa39e2af44f73352f555855177ffff82581d603dce7844f36b23b8c3f90afba40aa188e7f1d3f6e8acd1d544ed1da91a003822ad021a00068143031a04e0498309a1581cfe01b858c6132bb5411ba3fb609224c8722ae8d43ed286d8085ae78aa14b4369726375697423303033010b58203d219786b4554352cd622c0beb3ff5d07b0168028c8a1b174c3e278d97836ef50d8182582048444657cfe2aa426f62698de991b4b8340c56752d09727bffb6e7b424bdc8e3000e81581c3dce7844f36b23b8c3f90afba40aa188e7f1d3f6e8acd1d544ed1da91082581d606ce33294813b1feba6a9728d5bf287464d85593730e5ad00367c718f1a004c4b40111a004c4b40a300828258202cba9d0fa8c43ee9ecb4d4535b38b0e2064acee683cffa005a42c8271021da8b584071dd6f2e2831c580ac8c809a2f410e149a2a30994c9c9d985e61c6b9226232a2c82563134bc498ab44c49657155cbd142e1a320ee43d33a08968d05f70d4f00d825820def8fec9a568b0cbecdefc7e2ed95d8c95ddc9e6414cbd4ba18b605dc4067c9958400a7c003c1c3602bc3d8f3de9ba38e3ebe2cc130d89eaa47acf7e763157571b796c20145e1d5d6fb6f6915190121c92d5c4097974ff468a0192c07035fb34e80c0581840100d87980821a001039a81a12e09f430781590b7c590b790101003323232323232323232323232323232225333009323232323253323300f300130113754004264a666666030008264646464a666028600c0022a666030602e6ea80205400803854ccc050c00c00454ccc060c05cdd50040a8010070a99980a18020008a99980c180b9baa0081500200e00e3015375400e2646464646464646464646464a6603e66e59241076f776e65723a2000373266002600e60426ea805d220100153301f3372c92011365787472615f7369676e61746f726965733a20003732660026e9c0212201001323232533302500101c13253330263029002132325330253372c92112746f6b656e2061737365745f6e616d653a200037326600e6ea400922010015330253372c92010e746f6b656e20616d6f756e743a200037326600e6ea00052201001323232325333028301a00415333028301700515333028301a302a3754646600200202644a66605c0022980103d87a800013232533302c3371e0046eb8c054c0bcdd501289807198189ba90024bd7009980200200098190011bae30300011533029491126f776e6572207369676e6564207478212121001325333029301b302b3754002264a6605666e59241086f75747075743a200037326601a6008605a6ea8c010c0b4dd5000a4500132533302b301d302d3754002294054ccc0accdc780e1bae3031302e3754002264a6660586038605c6ea80044c94cccccc0d400454ccc0b4c07cc0bcdd50008992999819000816099299999981b80081681681681689919299981a800817899299999981d00081801801801809919299981c000819099299999981e80081981981981989919299981d80081a899299999982000081b01b01b01b09919299981f00081c099299999982180081c81c8992999820182180189919800800801111929998218010a51132533333304800103e03e03e03e13230033048004375c002608a00460040040746eb00040e40e4c100004c10000cdd7000981e800981e8019bae001303a001303a003375c002606e002606e0066eb8004c0d0004c0c0dd5000815815815815815981918179baa0010293006302e37540042a660589211f65787065637420706f6c6963795f6964203d3d207363726970745f6861736800163004302d37546008605a6ea8004c0bcc0b0dd500081299980080a80c8030a99814a4815a65787065637420536f6d65285f29203d0a2020202020202020202020206c6973742e66696e642865787472615f7369676e61746f726965732c20666e28766b6829207b20766b68203d3d20706172616d732e6f776e6572207d29001614a02a666050602e0082a666050602e00a264a666052603660566ea80044c94cc0accdcb2481086f75747075743a200037326601a6008605a6ea8c010c0b4dd5000a4500132533302b301d302d3754002294054ccc0acccc0accdc780e1bae3031302e3754002941288992999816180e18171baa00113253333330350011533302d301f302f3754002264a66606400205a264a66666606e00205c05c05c05c26464a66606a002060264a66666607400206206206206226464a666070002066264a66666607a002068068068068264a666074607a006266e3c05001c0d4dd7000981d000981d0019bae00130370013037003375c002606800260606ea80040b00b00b00b00b0c0c8c0bcdd5000814980318171baa002153302c49011f65787065637420706f6c6963795f696420213d207363726970745f6861736800163004302d37546008605a6ea8004c0bcc0b0dd500081299980080a80c8030a50153302949010b61696b656e3a3a746f646f0016222323300100100422533303000114c103d87a800013232533302e301d32533302f301e303137540022900009bad30353032375400264a66605e603c60626ea80045300103d87a8000132330010013756606c60666ea8008894ccc0d4004530103d87a80001323232325333035337220180042a66606a66e3c0300084c05ccc0e8dd4000a5eb80530103d87a8000133006006003375a606e0066eb8c0d4008c0e4008c0dc004cc03cdd5981a181a98189baa00200613010330330024bd70099802002000981a001181900091816800918161816981680098131baa018375a604c0046eb8c090004074c09c004c94ccc084c040c08cdd50008a5eb7bdb1804dd5981398121baa0013300100b01122323300100100322533302700114c0103d87a800013232323253330273372200e0042a66604e66e3c01c0084c024cc0b0dd3000a5eb80530103d87a8000133006006003375660520066eb8c09c008c0ac008c0a4004dd2a40006002002444a6664666605000626464646464646601800400266e2922010128000025333024337100069007099b80483c80400c54ccc090cdc4001a410004266e00cdc0241002800690068b2999813800899b8a4881035b5d2900005133714911035b5f2000333300800133714911025d2900005223330090090023006001223330090090020013758604a0046eb4c08c004c8cdd81ba83023001374e60480026ea800c4c94ccc0940044cdc52441027b7d00003133714911037b5f2000323233001001003225333028001100315333028302b0011323330090093027001337149101023a20003330090093028001004302a0011323330090093027001337149101023a20003330090093028001300633003003302c002302a0013371491102207d000033756006264a66604a002266e29221025b5d00003133714911035b5f2000333300600133714911015d000032233300700700230040012233300700700200137580066e292201022c2000133005375a0040022646466e2922010268270000132333001001337006e3400920013371491101270000322253330233371000490000800899191919980300319b8000548004cdc599b80002533302633710004900a0a40c02903719b8b33700002a66604c66e2000520141481805206e0043370c004901019b8300148080cdc70020011bae0022222323300100100522533302500110051533302530280011330033027001005133004302700133002002302800122323300100100322533301e30100011337149110130000031533301e337100029000099b8a489012d003300200233702900000089980299b8400148050cdc599b803370a002900a240c00066002002444a66603666e2400920001001133300300333708004900a19b8b3370066e140092014481800048c078c07c004dd6180e180e980e980e980e8011bab301b001301b301b0023758603200260326032602a6ea8020dc3a40046e1d200400a00a00a00a375c602a60246ea8008dc3a40002c6026602800460240026024004602000260186ea8004526153300a4911856616c696461746f722072657475726e65642066616c73650013656153300749011672656465656d65723a204d696e7452656465656d6572001615330064916d657870656374205b506169722861737365745f6e616d652c20616d6f756e74295d203d0a2020202020206d696e740a20202020202020207c3e206173736574732e746f6b656e7328706f6c6963795f6964290a20202020202020207c3e20646963742e746f5f70616972732829001615330054916565787065637420536f6d65286f757470757429203d0a2020202020202020202020206f7574707574730a20202020202020202020202020207c3e2066696e645f6163636f756e745f6f757470757428706f6c6963795f69642c2061737365745f6e616d6529001615330044912765787065637420496e6c696e65446174756d286461746129203d206f75747075742e646174756d0016153300349122657870656374205f3a205a6b566572696669636174696f6e4b6579203d2064617461001615330024912a657870656374204163636f756e74446174756d207b20757365725f69642c202e2e207d203d206461746100165734ae7155ceaab9e5573eae815d0aba2574898131d8799f03581c3dce7844f36b23b8c3f90afba40aa188e7f1d3f6e8acd1d544ed1da94d31323334353637383930303030ff0001f5f6").to_json());

const witnessSet = CML.TransactionWitnessSet.from_cbor_hex("a10083825820c4aff2d2af6c06a425135034a90c96465a3b8b4de2da747cee8451f74954cb3158404ab38668761c5e46d165547122a0e71e1afcf6ee5d558a316d76445e8a3fbc3423f3ca8f1b01de4d59d79d40aa83f772d5663756bfd61fd9a4c7e456a073650e8258202cba9d0fa8c43ee9ecb4d4535b38b0e2064acee683cffa005a42c8271021da8b5840d604cc1c6d8ee89c0b721e300dfcbab4d7116914880838db497e534d33a3bb08a05dc25a369f8d32562e56bc7329ce348fa1418f0bb7be6662b43143cb10f30c82582023679149fc46d9821c2b04d9cd03615b95552119c0be62b1221c8e05e3c36c3758404e279ada90b0aab94dad57a836323b28905cbecd4088178d726815cc1279e13e3c485f14bba6510327f7c401bc85aa4788f1105fdd955c787ac2b5aa1de2440c")
console.log("TX WitnessSet:", witnessSet.to_json())